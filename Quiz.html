<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quiz Master â€” Bootstrap JS Quiz</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --card-radius: 1.25rem;
    }
    body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; background: #0f172a; }
    .gradient-bg {
      background: radial-gradient(1200px 600px at 20% -10%, #22d3ee22, transparent 60%),
                  radial-gradient(1000px 600px at 100% 0%, #a78bfa22, transparent 60%),
                  linear-gradient(180deg, #0b1220, #0f172a);
    }
    .card-quiz { border: 0; border-radius: var(--card-radius); box-shadow: 0 10px 30px rgba(0,0,0,.35); }
    .btn-answer { text-align: left; }
    .btn-answer:not(.disabled):hover { transform: translateY(-1px); }
    .btn-answer, .btn-next { transition: transform .12s ease, box-shadow .12s ease; }
    .btn-next:hover { transform: translateY(-1px); }
    .badge-soft { background: rgba(255,255,255,.08); border: 1px solid rgba(255,255,255,.12); }
    .progress { height: .75rem; border-radius: .75rem; }
    .progress-bar { transition: width .35s ease; }
    .kbd-hint { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: .85rem; }
    .answer-correct { outline: 3px solid #22c55e55; }
    .answer-wrong { outline: 3px solid #ef444455; }
    @media (max-width: 576px) {
      .display-6 { font-size: 1.6rem; }
    }
  </style>
</head>
<body class="gradient-bg text-white">
  <div class="container py-5">
    <header class="d-flex align-items-center justify-content-between mb-4">
      <div>
        <h1 class="h3 fw-bold mb-1">Quiz Master</h1>
        <div class="text-white-50 small">JavaScript-powered multiple-choice quiz</div>
      </div>
      <div class="d-flex gap-2 align-items-center">
        <span id="highScoreBadge" class="badge rounded-pill badge-soft">High Score: <span id="highScore">0</span></span>
        <button class="btn btn-sm btn-outline-light" data-bs-toggle="modal" data-bs-target="#howToPlay">How to play</button>
      </div>
    </header>

    <!-- Start Screen -->
    <section id="startScreen" class="row justify-content-center">
      <div class="col-lg-8">
        <div class="card card-quiz bg-dark text-white p-4 p-md-5">
          <div class="card-body">
            <h2 class="display-6 fw-bold">Ready to test your brain? ðŸ§ </h2>
            <p class="text-white-50">You'll get 10 multiple-choice questions. Click an answer (or press <span class="kbd-hint">1â€“4</span>), then hit Next. Your score updates as you go. Good luck!</p>

            <div class="d-flex align-items-center gap-3 mt-4">
              <button id="startBtn" class="btn btn-primary btn-lg px-4">Start Quiz</button>
              <div class="d-flex align-items-center gap-2 text-white-50 small">
                <span class="kbd-hint border rounded px-2 py-1">1</span>
                <span class="kbd-hint border rounded px-2 py-1">2</span>
                <span class="kbd-hint border rounded px-2 py-1">3</span>
                <span class="kbd-hint border rounded px-2 py-1">4</span>
                <span>to answer</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Quiz Screen -->
    <section id="quizScreen" class="row justify-content-center d-none">
      <div class="col-lg-8">
        <div class="card card-quiz bg-dark text-white">
          <div class="card-body p-4 p-md-5">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <span class="badge rounded-pill bg-primary">Question <span id="current">1</span>/<span id="total">10</span></span>
              <span class="badge rounded-pill badge-soft">Score: <span id="score">0</span></span>
            </div>

            <div class="progress mb-4 bg-secondary">
              <div class="progress-bar bg-success" id="progressBar" style="width: 0%"></div>
            </div>

            <h3 id="questionText" class="fw-bold mb-4">Question text goes here</h3>

            <div id="answers" class="d-grid gap-3">
              <!-- Answers injected here -->
            </div>

            <div class="d-flex justify-content-between align-items-center mt-4">
              <button id="skipBtn" class="btn btn-outline-light" type="button">Skip</button>
              <button id="nextBtn" class="btn btn-success btn-next" disabled type="button">Next â†’</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Result Screen -->
    <section id="resultScreen" class="row justify-content-center d-none">
      <div class="col-lg-8">
        <div class="card card-quiz bg-dark text-white p-4 p-md-5">
          <div class="card-body text-center">
            <h2 class="fw-bold mb-3">All done! ðŸŽ‰</h2>
            <p class="text-white-50 mb-4">Here's how you did.</p>

            <div class="row g-3 justify-content-center mb-4">
              <div class="col-6 col-md-3">
                <div class="p-3 bg-black rounded-4 border border-secondary h-100">
                  <div class="small text-white-50">Score</div>
                  <div class="fs-3 fw-bold" id="finalScore">0</div>
                </div>
              </div>
              <div class="col-6 col-md-3">
                <div class="p-3 bg-black rounded-4 border border-secondary h-100">
                  <div class="small text-white-50">Accuracy</div>
                  <div class="fs-3 fw-bold" id="finalAccuracy">0%</div>
                </div>
              </div>
              <div class="col-6 col-md-3">
                <div class="p-3 bg-black rounded-4 border border-secondary h-100">
                  <div class="small text-white-50">Best</div>
                  <div class="fs-3 fw-bold" id="bestScore">0</div>
                </div>
              </div>
            </div>

            <div class="d-flex gap-2 justify-content-center">
              <button id="playAgainBtn" class="btn btn-primary">Play Again</button>
              <button id="reviewBtn" class="btn btn-outline-light">Review Answers</button>
              <button id="clearHighBtn" class="btn btn-outline-danger">Clear High Score</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Review Screen -->
    <section id="reviewScreen" class="row justify-content-center d-none">
      <div class="col-lg-10">
        <div class="card card-quiz bg-dark text-white p-4 p-md-5">
          <h3 class="fw-bold mb-4">Review</h3>
          <div id="reviewList" class="vstack gap-3"></div>
          <div class="text-end mt-4">
            <button id="backToResults" class="btn btn-outline-light">Back</button>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- How to Play Modal -->
  <div class="modal fade" id="howToPlay" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content bg-dark text-white">
        <div class="modal-header border-secondary">
          <h5 class="modal-title">How to play</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <ul class="mb-0">
            <li>Click an answer (or press keys <span class="kbd-hint">1</span>â€“<span class="kbd-hint">4</span>).</li>
            <li>Green = correct, Red = wrong. Score updates instantly.</li>
            <li>Press <strong>Next</strong> to move on. You can also <strong>Skip</strong>.</li>
            <li>At the end, see your accuracy and high score. Data is stored locally.</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // ===== Utility helpers =====
    const $ = (sel, root = document) => root.querySelector(sel);
    const $$ = (sel, root = document) => Array.from(root.querySelectorAll(sel));

    function shuffle(array) {
      // Fisher-Yates
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    // ===== Sample Questions (edit or replace) =====
    const QUESTION_BANK = [
      {
        q: "Which HTML tag is used to include JavaScript code?",
        options: ["<javascript>", "<script>", "<js>", "<code>"],
        answer: 1
      },
      {
        q: "In CSS, which property is used to change the text color?",
        options: ["font-color", "color", "text-color", "foreground"],
        answer: 1
      },
      {
        q: "Which of the following is NOT a JavaScript data type?",
        options: ["Number", "String", "Character", "Boolean"],
        answer: 2
      },
      {
        q: "What does DOM stand for?",
        options: ["Document Object Model", "Data Object Manager", "Digital Ordinance Model", "Document Orientation Map"],
        answer: 0
      },
      {
        q: "Which array method adds an item to the end of an array?",
        options: ["push()", "pop()", "shift()", "unshift()"],
        answer: 0
      },
      {
        q: "Bootstrap primarily helps withâ€¦",
        options: ["Server-side APIs", "Database queries", "Responsive UI components", "Image compression"],
        answer: 2
      },
      {
        q: "Which keyword declares a block-scoped variable in JS?",
        options: ["var", "let", "define", "mutable"],
        answer: 1
      },
      {
        q: "What is the correct operator for strict equality?",
        options: ["==", "=", "===", "=>"],
        answer: 2
      },
      {
        q: "Which method converts JSON text to an object?",
        options: ["JSON.parse()", "JSON.stringify()", "Object.assign()", "map()"],
        answer: 0
      },
      {
        q: "What does CSS stand for?",
        options: ["Computer Style Sheets", "Cascading Style Sheets", "Creative Style System", "Coded Style Syntax"],
        answer: 1
      }
    ];

    // ===== State =====
    const state = {
      questions: [],
      index: 0,
      score: 0,
      picks: [], // store user's chosen index for review (-1 for skipped)
      locked: false
    };

    const els = {
      startScreen: $('#startScreen'),
      quizScreen: $('#quizScreen'),
      resultScreen: $('#resultScreen'),
      reviewScreen: $('#reviewScreen'),
      questionText: $('#questionText'),
      answers: $('#answers'),
      nextBtn: $('#nextBtn'),
      skipBtn: $('#skipBtn'),
      score: $('#score'),
      current: $('#current'),
      total: $('#total'),
      progressBar: $('#progressBar'),
      finalScore: $('#finalScore'),
      finalAccuracy: $('#finalAccuracy'),
      bestScore: $('#bestScore'),
      highScore: $('#highScore'),
      highScoreBadge: $('#highScoreBadge'),
      reviewList: $('#reviewList'),
    };

    const LS_KEY = 'quizmaster_highscore';

    function loadHighScore() {
      const best = Number(localStorage.getItem(LS_KEY) || 0);
      els.highScore.textContent = best;
      return best;
    }

    function setHighScore(val) {
      localStorage.setItem(LS_KEY, String(val));
      els.highScore.textContent = val;
    }

    function initQuiz() {
      state.questions = shuffle(QUESTION_BANK.map(q => ({ ...q }))); // shallow copy + shuffle
      state.index = 0;
      state.score = 0;
      state.picks = [];
      state.locked = false;
      els.total.textContent = state.questions.length;
      els.score.textContent = state.score;
      els.progressBar.style.width = '0%';
      showSection('quiz');
      renderQuestion();
    }

    function showSection(which) {
      els.startScreen.classList.toggle('d-none', which !== 'start');
      els.quizScreen.classList.toggle('d-none', which !== 'quiz');
      els.resultScreen.classList.toggle('d-none', which !== 'result');
      els.reviewScreen.classList.toggle('d-none', which !== 'review');
    }

    function renderQuestion() {
      const q = state.questions[state.index];
      els.current.textContent = state.index + 1;
      els.questionText.textContent = q.q;

      els.answers.innerHTML = '';
      q.options.forEach((opt, i) => {
        const btn = document.createElement('button');
        btn.className = 'btn btn-outline-secondary btn-lg btn-answer';
        btn.innerHTML = `<span class="me-2 kbd-hint border rounded px-2 py-1">${i+1}</span> ${opt}`;
        btn.dataset.index = i;
        btn.addEventListener('click', () => chooseAnswer(i, btn));
        els.answers.appendChild(btn);
      });

      els.nextBtn.disabled = true;
      state.locked = false;
      updateProgress();
    }

    function chooseAnswer(i, btn) {
      if (state.locked) return;
      state.locked = true;

      const q = state.questions[state.index];
      const correct = q.answer === i;
      state.picks[state.index] = i; // store pick

      // mark buttons
      $$('.btn-answer', els.answers).forEach((b, idx) => {
        b.classList.add('disabled');
        b.classList.remove('btn-outline-secondary');
        if (idx === q.answer) {
          b.classList.add('btn-success', 'answer-correct');
        }
        if (idx === i && !correct) {
          b.classList.add('btn-danger', 'answer-wrong');
        }
      });

      if (correct) {
        state.score++;
        els.score.textContent = state.score;
      }

      els.nextBtn.disabled = false;
    }

    function updateProgress() {
      const pct = (state.index / state.questions.length) * 100;
      els.progressBar.style.width = `${pct}%`;
    }

    function nextQuestion() {
      if (!state.locked) { // treat as skip if user presses Next without picking
        state.picks[state.index] = -1; // skipped
      }
      if (state.index < state.questions.length - 1) {
        state.index++;
        renderQuestion();
      } else {
        finishQuiz();
      }
    }

    function skipQuestion() {
      if (state.locked) return; // don't allow skip after pick
      state.picks[state.index] = -1; // skipped
      nextQuestion();
    }

    function finishQuiz() {
      els.progressBar.style.width = '100%';
      showSection('result');

      const total = state.questions.length;
      const acc = total ? Math.round((state.score / total) * 100) : 0;
      els.finalScore.textContent = `${state.score} / ${total}`;
      els.finalAccuracy.textContent = `${acc}%`;

      const best = loadHighScore();
      if (state.score > best) {
        setHighScore(state.score);
      }
      els.bestScore.textContent = Math.max(best, state.score);
    }

    function buildReview() {
      els.reviewList.innerHTML = '';
      state.questions.forEach((q, idx) => {
        const userPick = state.picks[idx];
        const isCorrect = userPick === q.answer;
        const skipped = userPick === -1;

        const card = document.createElement('div');
        card.className = 'p-3 border border-secondary rounded-4 bg-black';

        const title = document.createElement('div');
        title.className = 'd-flex justify-content-between align-items-center mb-2';
        title.innerHTML = `<strong>Q${idx+1}.</strong> <span class="badge ${isCorrect ? 'bg-success' : (skipped ? 'bg-secondary' : 'bg-danger')}">${skipped ? 'Skipped' : (isCorrect ? 'Correct' : 'Wrong')}</span>`;

        const qtext = document.createElement('div');
        qtext.className = 'mb-2';
        qtext.textContent = q.q;

        const list = document.createElement('div');
        list.className = 'vstack gap-1';
        q.options.forEach((opt, i) => {
          const item = document.createElement('div');
          const isAns = i === q.answer;
          const picked = i === userPick;
          item.className = `small p-2 rounded ${isAns ? 'bg-success text-white' : (picked ? 'bg-danger text-white' : 'bg-dark text-white-50')}`;
          item.textContent = `${i+1}. ${opt}`;
          list.appendChild(item);
        });

        card.append(title, qtext, list);
        els.reviewList.appendChild(card);
      });
    }

    // ===== Event Listeners =====
    $('#startBtn').addEventListener('click', initQuiz);
    $('#nextBtn').addEventListener('click', nextQuestion);
    $('#skipBtn').addEventListener('click', skipQuestion);
    $('#playAgainBtn').addEventListener('click', () => { showSection('start'); });
    $('#clearHighBtn').addEventListener('click', () => { localStorage.removeItem(LS_KEY); loadHighScore(); });

    $('#reviewBtn').addEventListener('click', () => {
      buildReview();
      showSection('review');
    });
    $('#backToResults').addEventListener('click', () => showSection('result'));

    // Keyboard shortcuts 1-4 for answers, Enter for next
    document.addEventListener('keydown', (e) => {
      if (!els.quizScreen.classList.contains('d-none')) {
        const num = Number(e.key);
        if (num >= 1 && num <= 4) {
          const btn = els.answers.querySelector(`[data-index="${num-1}"]`);
          if (btn) btn.click();
        }
        if (e.key === 'Enter' && !els.nextBtn.disabled) {
          nextQuestion();
        }
        if (e.key.toLowerCase() === 's' && !state.locked) {
          skipQuestion();
        }
      }
    });

    // On load
    loadHighScore();
  </script>
</body>
</html>
